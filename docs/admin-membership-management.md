# 管理员会员管理操作手册

## 概述

本手册介绍管理员如何使用会员管理功能，特别是新增的会员到期时间调整功能。

## 访问管理后台

1. **登录管理后台**
   - 访问 `/admin` 页面
   - 使用管理员账户登录（用户名：admin，密码：请联系系统管理员）
   - 登录成功后将看到管理后台界面

2. **权限说明**
   - 只有管理员账户才能访问会员管理功能
   - 所有操作都会记录在操作日志中
   - 操作具有不可撤销性，请谨慎操作

## 会员管理功能

### 用户搜索

1. **搜索用户**
   - 在"用户管理"标签页中
   - 输入用户邮箱进行搜索
   - 系统将显示匹配的用户列表

2. **用户信息解读**
   - **会员状态标签**：
     - 🟢 活跃会员：当前有效的会员用户
     - 🔴 会员已过期：会员已到期的用户
     - ⚫ 无会员：未购买会员的普通用户
   - **会员等级**：入门版/标准版/高级版
   - **付费周期**：月付/年付
   - **到期状态**：正常/即将过期/已过期
   - **积分信息**：当前积分、月度额度
   - **到期时间**：会员到期的具体时间

### 调整会员到期时间

#### 使用场景

- **测试功能**：测试会员到期后的积分重置功能
- **客服需求**：处理用户的特殊情况
- **系统维护**：修正错误的到期时间

#### 操作步骤

1. **找到目标用户**
   - 在用户搜索中找到需要调整的用户
   - 确认用户当前为活跃会员状态
   - 只有活跃会员才会显示"调整到期时间"按钮

2. **打开调整界面**
   - 点击用户操作区域的"调整到期时间"按钮（时钟图标）
   - 系统将弹出调整界面

3. **查看当前信息**
   - 调整界面会显示：
     - 用户邮箱
     - 当前会员等级（入门/标准/高级）
     - 当前付费周期（月付/年付）
     - 当前到期时间

4. **设置新的到期时间**
   - 使用日期时间选择器选择新的到期时间
   - **可以选择过去的日期**（用于测试过期会员功能）
   - **可以选择未来的日期**（正常调整）
   - 日期范围：2020年1月1日 至 2030年12月31日

5. **输入调整原因**
   - 在"调整原因"字段中输入原因（可选）
   - 建议输入原因以便日后追踪
   - 最大长度：500字符

6. **确认调整**
   - 检查所有信息无误后点击"确认调整"
   - 系统会显示加载指示器
   - 成功后会显示成功消息并关闭对话框

#### 注意事项

⚠️ **重要提醒**：
- 调整操作无法撤销，请仔细确认
- 设置过去日期会立即使会员过期
- 设置未来日期会延长会员期限
- 所有操作都会记录在系统日志中

### 其他会员操作

#### 快速设置会员

- 对于无会员的用户，可使用"快速设为标准会员"按钮
- 自动设置为标准会员（月付）
- 默认有效期为30天

#### 取消会员

- 在用户管理弹窗中可以取消用户会员
- 取消后用户立即失去会员权益
- 操作不可撤销

#### 积分管理

- 查看用户积分使用记录
- 手动赠送积分
- 查看积分重置历史

## 操作日志

### 查看日志

1. **访问日志**
   - 切换到"操作日志"标签页
   - 系统会显示最近的操作记录

2. **日志信息**
   - 操作类型：如"调整会员到期时间"
   - 管理员：执行操作的管理员用户名
   - 目标用户：被操作的用户邮箱
   - 操作时间：精确到秒的时间戳

3. **调整到期时间日志详情**
   ```json
   {
     "membership_level": "pro",
     "membership_duration": "monthly", 
     "previous_expiry_date": "2024-12-31T23:59:59.000Z",
     "new_expiry_date": "2023-01-01T00:00:00.000Z",
     "reason": "测试过期会员功能"
   }
   ```

### 日志审计

- 所有会员相关操作都会记录
- 日志包含操作前后的状态对比
- 支持按时间和操作类型筛选
- 用于合规性审计和问题排查

## 常见问题和解决方案

### 问题1：找不到"调整到期时间"按钮

**原因**：
- 用户不是活跃会员
- 用户会员已过期
- 用户从未购买过会员

**解决方案**：
- 确认用户当前会员状态
- 如需要，先为用户设置会员
- 过期会员可以直接调整到期时间

### 问题2：调整后用户界面没有更新

**原因**：
- 浏览器缓存问题
- 系统数据同步延迟

**解决方案**：
- 重新搜索用户
- 刷新页面
- 等待几秒后再次查看

### 问题3：无法选择某些日期

**原因**：
- 日期超出允许范围（2020-2030年）
- 日期格式不正确

**解决方案**：
- 选择2020年1月1日至2030年12月31日之间的日期
- 使用系统提供的日期选择器

### 问题4：操作失败提示"用户不是活跃会员"

**原因**：
- 用户会员状态已变化
- 数据库中会员记录有问题

**解决方案**：
- 重新搜索确认用户状态
- 检查用户会员购买记录
- 必要时联系技术人员

## 最佳实践

### 操作规范

1. **操作前确认**
   - 仔细核对用户邮箱
   - 确认当前会员状态
   - 理解调整的影响

2. **记录保持**
   - 始终填写调整原因
   - 使用清晰的描述
   - 记录相关的工单号或请求编号

3. **测试建议**
   - 使用测试环境进行功能验证
   - 在生产环境谨慎操作
   - 重要操作前进行数据备份

### 安全注意事项

1. **权限管理**
   - 定期更换管理员密码
   - 不要分享管理员账户
   - 及时退出登录

2. **操作审计**
   - 定期检查操作日志
   - 关注异常操作记录
   - 保持日志记录完整性

3. **数据保护**
   - 不要截图包含用户信息的界面
   - 注意保护用户隐私
   - 遵守数据保护法规

## 技术支持

如遇到以下情况，请联系技术支持：

- 系统错误或异常行为
- 数据不一致问题
- 功能无法正常使用
- 需要数据恢复

**联系方式**：
- 技术邮箱：[技术支持邮箱]
- 工单系统：[工单系统地址]
- 紧急联系：[紧急联系方式]

## 更新记录

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| 1.0 | 2024-01-XX | 初始版本，包含会员到期时间调整功能 |

---

*本手册随系统功能更新而更新，请以最新版本为准。*